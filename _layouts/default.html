<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% if page.title %}{{ page.title }} | {% endif %}{{ site.title }}</title>

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="{% if page.title %}{{ page.title }} | {% endif %}{{ site.title }}">
    <meta property="og:description" content="Quantitative Researcher — Interest rate modeling, portfolio optimization, and quantitative trading strategies.">
    <meta property="og:url" content="{{ site.url }}{{ page.url }}">
    <meta property="og:image" content="{{ site.url }}/assets/og-card.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:site_name" content="Ha Rim Jung">
    <meta name="twitter:card" content="summary_large_image">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;500;600&family=Inter:wght@300;400;500&family=Space+Mono:wght@400&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js" defer></script>
    {% if page.plotly %}<script src="https://cdn.plot.ly/plotly-2.27.0.min.js" defer></script>{% endif %}

    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        body{font-family:'Inter',sans-serif;background:#fafaf8;color:#1a1a1a;line-height:1.7;overflow-x:hidden}

        /* ─── Sidebar Styles (unified) ─── */
        {% include sidebar-styles.html %}

        /* ─── Formula Background ─── */
        .formula-bg{position:fixed;inset:0;pointer-events:none;z-index:0;overflow:hidden}
        .f{position:absolute;font-family:'Space Mono',monospace;white-space:nowrap;will-change:transform;transition:transform .3s ease-out}

        /* ─── Content Container ─── */
        .container{position:relative;z-index:1;max-width:800px;margin:0 auto;padding:60px 50px 80px}

        /* ─── Base Typography ─── */
        h1,h2,h3,h4{font-family:'Cormorant Garamond',serif;font-weight:400;line-height:1.3}
        h1{font-size:2.5rem;margin-bottom:1.5rem}
        h2{font-size:1.8rem;margin:2.5rem 0 1rem}
        h3{font-size:1.4rem;margin:2rem 0 .8rem}
        p{color:#666;margin-bottom:1.2rem;font-size:1rem;line-height:1.8}
        a{color:#1a1a1a;text-decoration:none;transition:all .2s}
        a:hover{color:#666}

        /* ─── Footer ─── */
        .layout-footer{padding:50px;text-align:center;border-top:1px solid #e0e0e0;font-size:.75rem;color:#999}
        .layout-footer a{color:#666;text-decoration:none}
        .layout-footer a:hover{color:#1a1a1a}

        /* ─── Responsive ─── */
        @media(max-width:1024px){
            .container{padding:30px 20px 50px}
        }
    </style>
    {% if page.extra_css %}{{ page.extra_css }}{% endif %}
</head>
<body>
<div class="formula-bg" id="formulaBg"></div>

{% include sidebar.html %}
{% include market-widget.html %}

<div class="main-wrapper">
    <div class="container">
        {% include breadcrumb.html %}
        {{ content }}
    </div>
    <footer class="layout-footer">
        <p>&copy; 2026 Ha Rim Jung &middot; <a href="mailto:gkfla2020@gmail.com">gkfla2020@gmail.com</a> &middot; <a href="https://github.com/gkfla2020-bit">GitHub</a></p>
    </footer>
</div>

<script>
document.addEventListener('DOMContentLoaded', function(){
    /* Formula background */
    const syms=['Σ','∫','∂','√','∞','π','θ','σ','μ','λ','α','β','γ','δ','Δ','Γ','κ','ρ','φ','ψ','dx','dt','dW','E[X]','Var','ln','exp'];
    const bg=document.getElementById('formulaBg');
    const items=[];
    for(let i=0;i<25;i++){
        const el=document.createElement('div');
        el.className='f';
        el.textContent=syms[Math.floor(Math.random()*syms.length)];
        el.style.fontSize=(14+Math.random()*18)+'px';
        el.style.color='rgba(0,0,0,'+(0.025+Math.random()*0.035)+')';
        el.style.left=Math.random()*100+'%';
        el.style.top=Math.random()*100+'%';
        bg.appendChild(el);
        items.push({el,x:parseFloat(el.style.left),y:parseFloat(el.style.top),vx:(Math.random()-.5)*.02,vy:(Math.random()-.5)*.02});
    }
    let mx=-1000,my=-1000;
    document.addEventListener('mousemove',function(e){mx=(e.clientX/window.innerWidth)*100;my=(e.clientY/window.innerHeight)*100;});
    function tick(){
        for(const it of items){
            it.x+=it.vx;it.y+=it.vy;
            if(it.x<0||it.x>100)it.vx*=-1;
            if(it.y<0||it.y>100)it.vy*=-1;
            const dx=it.x-mx,dy=it.y-my,dist=Math.sqrt(dx*dx+dy*dy);
            let px=0,py=0;
            if(dist<12){const f=(12-dist)/12*3;px=(dx/dist)*f;py=(dy/dist)*f;}
            it.el.style.left=(it.x+px)+'%';
            it.el.style.top=(it.y+py)+'%';
        }
        requestAnimationFrame(tick);
    }
    tick();
});
</script>
{% include market-data.html %}
</body>
</html>
